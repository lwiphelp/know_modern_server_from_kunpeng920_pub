

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>序 &mdash; 从鲲鹏920了解现代服务器实现和应用 0.1a1 文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script type="text/javascript" src="_static/translations.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" />
    <link rel="next" title="感谢" href="感谢.html" />
    <link rel="prev" title="Welcome to 从鲲鹏920了解现代服务器实现和应用’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> 从鲲鹏920了解现代服务器实现和应用
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">序</a></li>
<li class="toctree-l1"><a class="reference internal" href="感谢.html">感谢</a></li>
<li class="toctree-l1"><a class="reference internal" href="认识服务器/index.html">认识服务器</a></li>
<li class="toctree-l1"><a class="reference internal" href="认识鲲鹏920：一个服务器SoC/index.html">认识鲲鹏920：一个服务器SoC</a></li>
<li class="toctree-l1"><a class="reference internal" href="计算子系统/index.html">计算子系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="网络子系统/index.html">网络子系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="存储子系统/index.html">存储子系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="RAS设计/index.html">RAS设计</a></li>
<li class="toctree-l1"><a class="reference internal" href="未来展望.html">未来展望</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">从鲲鹏920了解现代服务器实现和应用</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>序</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/序.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>序<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h1>
<p>领导和同事让我给鲲鹏处理器写一本书，让鲲鹏处理器的生态可以更快推广起来。这种事
情我是愿意做的，因为毕竟我自己也参与到了这个产品的设计中，希望看到这个产品发扬
光大。而且，介绍自己参与的产品也自有其快乐和自豪在其中，谁不愿意呢？</p>
<p>但第一次决定接受这样的任务，也是令人惴惴不安的。我首先要解决这么几个问题：</p>
<p>首先，我可以敝帚自珍，絮絮叨叨说自己的东西有多好，但谁愿意听相亲角的母亲在那里
滔滔不绝谈自家的孩子呢？既然写书，你就要准备好主要不是“征婚”，而是给读者以知识
本身。所以我得选一个真正有用的知识方向作为主题来讲，聚焦在这个知识方向上，而不
是聚焦在介绍自家孩子上。最终我决定选的主题是“现代服务器设计和应用”。作者自己在
操作系统领域工作了二十多年，眼看着各种处理器技术在这二十多年间高速发展，发生了
翻天覆地的变化，但很多计算机行业的学生和工程师，仍在使用最原始的计算机的定义和
经验进行设计和开发，我们需要有人从新开始总结现在的计算机是如何设计和权衡的，这
会对大部分工程师都有帮助。这样的主题也是作者可以控制得住的。</p>
<p>第二个问题，在我的认识中，写书是一件非常困难的事情。一方面，我自己才疏学浅，很
多知识也没有融汇贯通。另一方面，书基本上是一种“判词”，如果我们在书里面定义了一
个计算机的通用概念，或者公开了某个测试数据，我们马上会遇到这样一些问题：你这个
说法得到了权威或者行业的广泛认可吗？你的测试结果获得某个认证机构的授权吗？你的
环境正确吗？这样一来，除非你是领域的权威，否则你就只能抄行业权威的意见了。</p>
<p>作者无力去完成这么多的认证和授权。作者甚至觉得，这是没有什么意义的。因为这样做
成本高昂，但这个高昂的成本得到的东西却不能维持。计算机是一个高速发展的领域。这
种高速发展背后有一个重要的策略，就是“换概念”：每一个计算机概念，都可以被新的概
念取代，从而提供技术进步。比如我们过去认为访问内存就是对内存发出一个包含地址的
读写请求，然后得到那个位置内存的内容。但现在这可能仅仅是在访问你的Cache，也有可
能你在通知你的一个设备（过去访问设备需要专门的io指令）。从CPU中的软件的角度，这
个概念并没有发生改变，但事实上整个设计已经和原来不一样了。</p>
<p>今天我们认知的进程、线程、中断、互联、设备的概念，时时刻刻都在发生变化，我们去
得到一个临时的“权威结论”，收益并不大。</p>
<p>所以，作者打算做这么一个取舍：我们不谈服务器的发展，我们通过鲲鹏920这个特定的服
务器设计，来说明现在的服务器可以设计成什么样的。读者不需要认为这就是“标准”了，
但它仍是一个参与现代服务器市场竞争，并且在实际的生产中应用的系统。我们会介绍它
可以达到怎么样的计算能力，读者也可以因此对比它和其他解决方案在取舍上有什么不同
，达到的效果有什么不同。但我们不去对比实际方案的优劣。我们只是讨论鲲鹏920面对什
么样的问题，是怎么决定用这种方法来解决的，解决的效果如何。</p>
<p>我们也尽量不去跟踪历史，比如数据中心互联的方法，经过了多种方案的洗礼，现在仍存
在着不同的解决方案，但我们看到的情形是我们所了解的互联的主流是Ethernet电口和光
口。我们甚至不打算去调查这是否有数据支持，我们只是知道我们的客户都要求提供这样
的解决方案，这背后当然有市场调研的机构和组织在支撑，但我们也不可能在本书中提供
这样的调研数据。这种情况下，我们会选择直接把Ethernet接口作为一种常见的互联接口
介绍鲲鹏920是怎么实现它的。</p>
<p>在这个描述的过程中，我们会不断使用到现在服务器领域中的概念和定义。这些概念在传
统教科书中的定义已经老旧而不合时宜了。所以我们会给出我们自己的解释，它不需要和
所有人的观点一致（但我们尽量让它和大部分行业内的认识是一致的），读者只需要根据
我们的定义理解我们的逻辑，而不需要用这个作为“经典定义”，用来指导所有的其他认识
工作。但仅作为“一家之言”，它仍有其价值。</p>
<p>最后，我们不急着立即就变成一本公开出版的书，我们先以一个开放项目的方式在网络上
公开写作，尽量收集更多人的共识，等我们收到足够的批评（并进行修改）后，我们再考
虑书的问题。这会是一种类似开源软件的方式，开发阶段我们仅仅是个开源项目，到出版
的阶段，它就变成一个“商业发行版”了。到这个阶段，我们再去单独获取部分原来不能提
，但对书的内容有足够大的价值的信息的授权。</p>
<p>比如在写作过程中，我们一开始谈服务器应用的例子的时候，可能会获得一些华为公司的
公开使用实例数据，但当整本书已经成型了，对于要暴露的信息已经有较好的预期了，我
们可能可以获得或者是华为公司的，也可能是其他服务器提供商的，的实例数据的使用授
权，到时的信息就会更加完整。但没有这些信息，并不严重影响本书的逻辑表达。</p>
<p>也因为如此，我不会站在某个公司的立场上来写这些信息，避免这成为一种“官方声明”。
我重点还是站在一个可以接触这个服务器的软件开发者的角度，介绍这个服务器芯片和它
后面的设计考量。或者说，这是一本从软件工程师的角度，看待硬件，包括SoC内部，如何
设计的书。这对软件工程师是重要的，因为正确认知硬件的设计考量和约束，是控制软件
构架如何建模的基础。</p>
<p>同时，我不打算把这些文字变成另一本芯片用户手册，大部分时候，用户其实也不需要专
门去关心芯片用户手册，因为很多问题会隐藏在比如编译器，操作系统这样一些软件后面
。所以我不会列出诸如“寄存器列表”，“API列表”一类手册才会关心的东西，这些东西读者
可以直接去查看代码，阅读手册。我要提供的是用户手册之外的逻辑，我更关注的是某种
技术的概念空间，设计理念，以及做出各种选择背后的逻辑是什么。这些信息有利于读者
对服务器设计和应用会遇到什么实际的困难，以及如何去响应这些困难做出正确的理解和
决策。</p>
<p>总的来说，作者希望这本书给基于现代服务器设计解决方案或者具体软件的读者提供参考
。无论您是否用的鲲鹏处理器，面对的问题域是一样的。作为开源项目，作者欢迎其他服
务器提供者和使用者给我们补充逻辑，让它代表更多业内人士的意见。作者希望这不会简
单成为一本介绍鲲鹏的书，而是一本可以让读者了解现代服务器的设计思想的书。</p>
<p>作者也希望本书的前期读者有关心的主题或者疑问，可以随时联系我们，我们会尽最大的
可能把我们的理解补充进去。</p>
<p>本书介绍的内容可能涉及芯片设计，硬件工程设计，软件生态等各方面的内容，但本书写
作的时候尽量不依赖读者对这些技术都有深入的认识这个条件。本书的写作立场更接近于
4+1构架视图中的逻辑视图。它是给所有的参与者一个共同的逻辑空间，可以对其他方的工
作的控制要素有更多的认识。知道自己所在的领域，怎么和其他部分进行配合。</p>
<p>在写作的过程中，作者会尝试找更多了解鲲鹏设计的朋友参与不同部分的写作，还会在公
开版本中不断收集读者的意见，如果有其他的信息提供方愿意向我们提供更多的信息和授
权，我们也非常高兴接受和主题相关的内容。这些信息，我们都会放到致敬列表中。我们
希望最终整书的写作过程，是我们一群行业相关的参与者互相分享经验和知识的一个平台。</p>
<p>因此，除了本序的“我”，是指序的唯一作者，本书其他部分的“我”，都指的“我们”，表示
我们基于这个工程的一种“共同表达”。我们也会模糊这个“我”，和“我们”的区别。</p>
<p>本文的网络版本可以被免费阅读或者未经修改地进行完整的非商业分发。但作者们仍保留
自己的版权，其中任何文字和图片不接受未经授权进行任何商业使用。</p>
<p>Kenneth Lee</p>
<p>2020-01-13 深圳</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="感谢.html" class="btn btn-neutral float-right" title="感谢" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to 从鲲鹏920了解现代服务器实现和应用’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Kenneth Lee

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>